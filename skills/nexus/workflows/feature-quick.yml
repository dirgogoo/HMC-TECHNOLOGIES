name: "Quick Feature Workflow"
description: "Medium-complexity features - planning + execution with policies"
version: "1.1.0"

# i18n support
i18n:
  key: "workflows.feature_quick"  # pt-BR: "Desenvolvimento RÃ¡pido de Funcionalidade"

triggers:
  keywords: ["implement", "create", "add"]
  complexity: ["medium"]
  has_plan: false

phases:
  - id: "load-context"
    name: "Load Context"
    i18n_key: "nexus.phases.loading_context"
    plugin: "ald"
    hook: "load-memory"
    required: true

  - id: "sprint-check"
    name: "Sprint Check"
    i18n_key: "ald.sprint.in_scope"
    plugin: "ald"
    hook: "sprint-check"
    required: true
    break_on_fail: true

  - id: "plan"
    name: "Quick Planning"
    i18n_key: "nexus.phases.planning"
    plugin: "superpowers"
    hook: "write-plan"
    required: true

  - id: "find-policies"
    name: "Find Policies"
    i18n_key: "nexus.phases.finding_policies"
    plugin: "ald"
    hook: "policy-finder"
    required: true

  - id: "tdd-cycle"
    name: "TDD Implementation"
    i18n_key: "nexus.phases.executing"
    plugin: "superpowers-dev"
    hook: "test-driven-development"
    required: true
    depends_on: ["plan", "find-policies"]
    description: "Execute plan with TDD Red-Green-Refactor cycle"
    cycle:
      - "RED: Write failing test for next task"
      - "Verify RED: Watch test fail correctly"
      - "GREEN: Write minimal code to pass"
      - "Verify GREEN: Watch test pass"
      - "REFACTOR: Clean up code (keep tests green)"
      - "Repeat for next task"
    rules:
      - "NO PRODUCTION CODE WITHOUT FAILING TEST FIRST"
      - "Test must fail for expected reason"
      - "Write minimal code (no over-engineering)"
      - "All tests must pass before refactor"

  - id: "defense-in-depth"
    name: "Add Validation Layers"
    i18n_key: "nexus.phases.validating"
    plugin: "superpowers-dev"
    hook: "defense-in-depth"
    required: true
    depends_on: ["tdd-cycle"]
    description: "Add validation at multiple layers"
    layers:
      - "entry_point_validation"
      - "business_logic_validation"
      - "environment_guards"
      - "debug_logging"

  - id: "validate"
    name: "E2E Validation"
    i18n_key: "nexus.phases.validating"
    plugin: "ald"
    hook: "tester"
    required: true
    depends_on: ["defense-in-depth"]
    retry_on_fail: true

  - id: "review"
    name: "Code Review"
    i18n_key: "nexus.phases.reviewing"
    plugin: "ald"
    hook: "code-reviewer"
    required: true

estimated_duration: "30-45 minutes"
notes: "TDD by default - quick features with test-first discipline. Lighter than feature-full (no brainstorming) but same TDD quality."
